var Qt=Object.defineProperty,te=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var Mt=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var It=(o,t,e)=>t in o?Qt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,ft=(o,t)=>{for(var e in t||(t={}))se.call(t,e)&&It(o,e,t[e]);if(Mt)for(var e of Mt(t))ie.call(t,e)&&It(o,e,t[e]);return o},xt=(o,t)=>te(o,ee(t));import{P as oe,M as G,V as yt,a as u,D as ne,F as ae,S as re,A as he,b as it,G as ce,B as H,C as ot,c as P,d as nt,O as D,g as c,L as Ft,e as le,f as de,h as ge,i as bt,j as ue,k as jt,E as me,I as pe,l as w,m as we,n as fe,o as xe,p as at,q as ye,R as be,r as Ge,s as z,T as Ce,t as Le,u as ve,v as x,w as Se,x as Me,y as Ie,z as Fe,W as je,H as Pe,J as $,K as rt,N as Pt,Q as Ut,U as kt,X as B,Y as Ue,Z as ke,_ as Ee,$ as ht,a0 as Et,a1 as Te,a2 as Tt,a3 as Oe,a4 as Ae,a5 as Ot,a6 as He,a7 as De,a8 as ze,a9 as Be,aa as Re}from"./vendor.1b1bb524.js";const _e=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}};_e();const J=(o,t=null,e=0,s=0,i=0,n="Object")=>{let a=null;t?a=new G({color:t}):a=Ne(!0);const r=new yt(e,s,i),h=new u(o,a);return h.position.copy(r),h.name=n,h},Ne=(o=!1)=>{const t=new G({side:o?ne:ae}),e=Math.random(),s=1,i=.5;return t.color.setHSL(e,s,i),t},ct=o=>{for(;o.children.length>0;)ct(o.children[0]),o.remove(o.children[0]);o.geometry&&o.geometry.dispose(),o.material&&(Object.keys(o.material).forEach(t=>{!o.material[t]||o.material[t]!==null&&typeof o.material[t].dispose=="function"&&o.material[t].dispose()}),o.material.dispose())},We=o=>{const t=o.domElement,e=t.clientWidth,s=t.clientHeight,i=t.width!==e||t.height!==s;return i&&o.setSize(e,s,!1),i},At=(o,t)=>{const e=o.domElement;t.aspect=e.clientWidth/e.clientHeight,t.updateProjectionMatrix()},lt=(o=40)=>{const t=2,e=.1,s=1e3;return new oe(o,t,e,s)},m=(o,t=null)=>{o.target&&o.target.updateMatrixWorld(),o.shadow.camera.updateProjectionMatrix(),t&&t.update()},R=o=>{o.updateProjectionMatrix()};class U{constructor(t=null){this.scene=new re,this.activeCamera=lt(),this.flags=t,this.canAnimate=!1,this.hasPostProcess=!1,this.postProcess={bloom:!1}}updateFlags(t){t.showAxes!==this.flags.showAxes&&this.toggleAxes(t.showAxes),t.showGridControls!==this.flags.showGridControls&&this.toggleGridControls(t.showGridControls),this.flags=t}destroy(){ct(this.scene),this.gui&&this.gui.destroy()}toggleAxes(){}toggleGridControls(){}animate(){}}class qe extends U{constructor(t){super(t)}}const _=o=>{o.forEach(t=>{if(t.type==="Mesh"){const e=new he(10);e.material.depthTest=!1,e.renderOrder=1,t.add(e)}})},N=o=>{o.forEach(t=>{t.type==="Mesh"&&t.children.forEach(e=>{e.type==="AxesHelper"&&(t.remove(e),ct(e))})})};class Ve{constructor(t,e=10){const s=new ce(e,e);s.material.depthTest=!1,s.renderOrder=1,t.add(s),this.grid=s,this.visible=!1}get visible(){return this._visible}set visible(t){this._visible=t,this.grid.visible=t}}const W=(o,t,e,s=10)=>{const i=new Ve(t,s);o.add(i,"visible").name(e)},q=(o,t)=>{t.children.forEach(e=>{e.type==="GridHelper"&&(t.remove(e),ct(e))})},C=(o,t,e,s)=>{const i=o.addFolder(e);i.add(t,"x",-50,50).onChange(s),i.add(t,"y",0,50).onChange(s),i.add(t,"z",-50,50).onChange(s),i.open()};class y{constructor(t,e){this.object=t,this.prop=e}get value(){return`#${this.object[this.prop].getHexString()}`}set value(t){this.object[this.prop].set(t)}}class Ht{constructor(t,e){this.obj=t,this.prop=e}get value(){return it.radToDeg(this.obj[this.prop])}set value(t){this.obj[this.prop]=it.degToRad(t)}}class Dt{constructor(t,e,s,i){this.obj=t,this.minProp=e,this.maxProp=s,this.minDif=i}get min(){return this.obj[this.minProp]}set min(t){this.obj[this.minProp]=t,this.obj[this.maxProp]=Math.max(this.obj[this.maxProp],t+this.minDif)}get max(){return this.obj[this.maxProp]}set max(t){this.obj[this.maxProp]=t,this.min=this.min}}class Ke extends U{constructor(t,e){super(t);this.canvas=e,this.setScene(),this.cubeGeometry=new H(1,1,1),this.drawCubes(),this.canAnimate=!0,this.toggleAxes(t.showAxes),this.toggleGridControls(t.showGridControls)}setScene(){this.scene.background=new ot(0),this.activeCamera.fov=75,this.activeCamera.aspect=2,this.activeCamera.near=.1,this.activeCamera.far=5,this.activeCamera.position.z=2,this.light=new P(16777215,1),this.light.position.set(-1,2,4),this.scene.add(this.light),this.pLight=new nt(16777215,1),this.pLight.position.set(0,2,0),this.scene.add(this.pLight),this.controls=new D(this.activeCamera,this.canvas),this.controls.target.set(0,0,0),this.controls.update()}drawCubes(){this.objects=[J(this.cubeGeometry,4500104,0,0,0,"Green Cube"),J(this.cubeGeometry,8930474,-2,0,0,"Purple Cube"),J(this.cubeGeometry,11176004,2,0,0,"Melon Cube")],this.objects.forEach(t=>{this.scene.add(t)})}toggleAxes(t){t?_(this.objects):N(this.objects)}toggleGridControls(t){t?(this.gui=new c({title:"Cubes Grid Controls",container:document.getElementById("container-controls")}),this.objects.forEach(e=>{W(this.gui,e,e.name)})):this.gui&&(this.objects.forEach(e=>{q(this.gui,e)}),this.gui.destroy())}animate(t){this.objects.forEach((e,s)=>{const i=1+s*.2,n=t*i;e.rotation.x=n,e.rotation.y=n})}}class Ye extends U{constructor(t,e){super(t);this.canvas=e,this.setScene(),this.objects=[],this.spread=15,this.drawObjects(),this.canAnimate=!0,this.toggleAxes(t.showAxes),this.toggleGridControls(t.showGridControls)}setScene(){this.scene.background=new ot(2236962),this.activeCamera.fov=40,this.activeCamera.aspect=2,this.activeCamera.near=.1,this.activeCamera.far=1e3,this.activeCamera.position.z=120,this.lights={left:null,right:null};const t=new P(16777215,.5);t.position.set(-1,2,4),this.scene.add(t),this.lights.left=t;const e=new P(16777215,.5);e.position.set(1,2,4),this.scene.add(e),this.lights.right=e,this.controls=new D(this.activeCamera,this.canvas),this.controls.target.set(0,0,0),this.controls.update()}addObject(t,e,s){s.position.x=t*this.spread,s.position.y=e*this.spread,this.scene.add(s),this.objects.push(s)}addSolidGeometry(t,e,s,i="Unknown Object"){const n=J(s,null,t,e,0);n.name=i,this.addObject(t,e,n)}addLineGeometry(t,e,s,i="Unknown Object"){const n=new Ft({color:16777215}),a=new le(s,n);a.name=i,this.addObject(t,e,a)}drawObjects(){{const t=8,e=8,s=8;this.addSolidGeometry(-2,2,new H(t,e,s),"Cube")}{const t=7,e=24;this.addSolidGeometry(-1,2,new de(t,e),"Circle")}{const t=6,e=8,s=16;this.addSolidGeometry(0,2,new ge(t,e,s),"Cone")}{const t=4,e=4,s=8,i=12;this.addSolidGeometry(1,2,new bt(t,e,s,i),"Cylinder")}{const t=7;this.addSolidGeometry(2,2,new ue(t),"Dodecahedron")}{const t=new jt,e=-2.5,s=-5;t.moveTo(e+2.5,s+2.5),t.bezierCurveTo(e+2.5,s+2.5,e+2,s,e,s),t.bezierCurveTo(e-3,s,e-3,s+3.5,e-3,s+3.5),t.bezierCurveTo(e-3,s+5.5,e-1.5,s+7.7,e+2.5,s+9.5),t.bezierCurveTo(e+6,s+7.7,e+8,s+4.5,e+8,s+3.5),t.bezierCurveTo(e+8,s+3.5,e+8,s,e+5,s),t.bezierCurveTo(e+3.5,s,e+2.5,s+2.5,e+2.5,s+2.5);const i={steps:2,depth:2,bevelEnabled:!0,bevelThickness:1,bevelSize:1,bevelSegments:2};this.addSolidGeometry(-2,1,new me(t,i),"Extruded Heart")}{const t=7;this.addSolidGeometry(-1,1,new pe(t),"Icosahedron")}{const t=[];for(let e=0;e<10;++e)t.push(new w(Math.sin(e*.2)*3+3,(e-5)*.8));this.addSolidGeometry(0,1,new we(t),"Lathe")}{const t=7;this.addSolidGeometry(1,1,new fe(t),"Octahedron")}{let t=function(i,n,a){n*=Math.PI,i*=2*Math.PI,n=n*2;let r,h;n<Math.PI?(r=3*Math.cos(n)*(1+Math.sin(n))+2*(1-Math.cos(n)/2)*Math.cos(n)*Math.cos(i),h=-8*Math.sin(n)-2*(1-Math.cos(n)/2)*Math.sin(n)*Math.cos(i)):(r=3*Math.cos(n)*(1+Math.sin(n))+2*(1-Math.cos(n)/2)*Math.cos(i+Math.PI),h=-8*Math.sin(n));const l=-2*(1-Math.cos(n)/2)*Math.sin(i);a.set(r,l,h).multiplyScalar(.75)};const e=25,s=25;this.addSolidGeometry(2,1,new xe(t,e,s),"Klein")}{const t=9,e=9,s=2,i=2;this.addSolidGeometry(-2,0,new at(t,e,s,i),"Plane")}{const t=[-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1],e=[2,1,0,0,3,2,0,4,7,7,3,0,0,1,5,5,4,0,1,2,6,6,5,1,2,3,7,7,6,2,4,5,6,6,7,4],s=7,i=2;this.addSolidGeometry(-1,0,new ye(t,e,s,i),"Polyhedron")}{const t=2,e=7,s=18;this.addSolidGeometry(0,0,new be(t,e,s),"Ring")}{const t=new jt,e=-2.5,s=-5;t.moveTo(e+2.5,s+2.5),t.bezierCurveTo(e+2.5,s+2.5,e+2,s,e,s),t.bezierCurveTo(e-3,s,e-3,s+3.5,e-3,s+3.5),t.bezierCurveTo(e-3,s+5.5,e-1.5,s+7.7,e+2.5,s+9.5),t.bezierCurveTo(e+6,s+7.7,e+8,s+4.5,e+8,s+3.5),t.bezierCurveTo(e+8,s+3.5,e+8,s,e+5,s),t.bezierCurveTo(e+3.5,s,e+2.5,s+2.5,e+2.5,s+2.5),this.addSolidGeometry(1,0,new Ge(t),"Bezier Heart")}{const t=7,e=12,s=8;this.addSolidGeometry(2,0,new z(t,e,s),"Sphere")}{const t=7;this.addSolidGeometry(-2,-1,new Ce(t),"Tetrahedron")}new Le().load("resources/fonts/helvetiker_regular.typeface.json",e=>{const s=new ve("HELLO!",{font:e,size:3,height:.2,curveSegments:12,bevelEnabled:!0,bevelThickness:.15,bevelSize:.3,bevelSegments:5}),i=J(s,null,0,0,0);s.computeBoundingBox(),s.boundingBox.getCenter(i.position).multiplyScalar(-1);const n=new x;n.name="Text",n.add(i),this.addObject(-1,-1,n)});{const t=5,e=2,s=8,i=24;this.addSolidGeometry(0,-1,new Se(t,e,s,i),"Torus")}{const t=3.5,e=1.5,s=8,i=64,n=2,a=3;this.addSolidGeometry(1,-1,new Me(t,e,i,s,n,a),"Torus Knot")}{class t extends Pe{constructor(h){super();this.scale=h}getPoint(h){const l=h*3-1.5,d=Math.sin(2*Math.PI*h),M=0;return new yt(l,d,M).multiplyScalar(this.scale)}}const e=new t(4),s=20,i=1,n=8,a=!1;this.addSolidGeometry(2,-1,new Ie(e,s,i,n,a),"Tube")}{const t=8,e=8,s=8,i=15;this.addLineGeometry(-1,-2,new Fe(new H(t,e,s),i),"Line Cube")}{const t=8,e=8,s=8;this.addLineGeometry(1,-2,new je(new H(t,e,s)),"Wireframe Cube")}}toggleAxes(t){t?_(this.objects):N(this.objects)}toggleGridControls(t){t?(this.gui=new c({title:"Primitives Grid Controls",container:document.getElementById("container-controls")}),this.objects.forEach(e=>{W(this.gui,e,e.name)})):this.gui&&(this.objects.forEach(e=>{q(this.gui,e)}),this.gui.destroy())}animate(t){this.objects.forEach((e,s)=>{const i=.1+s*.1,n=t*i;e.rotation.x=n,e.rotation.y=n})}}class Xe extends U{constructor(t,e){super(t);this.infoElem=document.querySelector("#info"),this.canvas=e,this.textures={},this.loadManager=new $,this.loadTextures(),this.loadManager.onProgress=(s,i,n)=>{const a=i/n*100;this.infoElem.textContent="Loading textures... % "+parseInt(a)},this.loadManager.onLoad=()=>{this.infoElem.textContent="",this.setScene(),this.objects=[],this.drawObjects(),this.canAnimate=!0,this.toggleAxes(this.flags.showAxes),this.toggleGridControls(this.flags.showGridControls)}}loadTextures(){const t=new rt(this.loadManager),e=t.load("resources/textures/2k_sun.jpg");this.textures.sunDiffuse=e;const s=t.load("resources/textures/earth.jpg");this.textures.earthDiffuse=s;const i=t.load("resources/textures/skybox2.jpg");i.mapping=Pt,i.encoding=Ut,this.textures.skyDiffuse=i}setScene(){this.scene.background=this.textures.skyDiffuse,this.activeCamera.fov=40,this.activeCamera.aspect=2,this.activeCamera.near=.1,this.activeCamera.far=1e3,this.activeCamera.position.set(0,10,40),this.activeCamera.lookAt(0,0,0);const t=16777215,e=3;this.light=new nt(t,e),this.scene.add(this.light),this.controls=new D(this.activeCamera,this.canvas),this.controls.target.set(0,0,0),this.controls.update()}drawObjects(){const t=1,e=16,s=16,i=new z(t,e,s),n=new z(t,30,30),a=new G({emissiveMap:this.textures.sunDiffuse,emissive:16776960}),r=new u(n,a);r.name="Sun",r.scale.set(6,6,6),this.scene.add(r),this.objects.push(r);const h=new x;h.name="Mercury Orbit",this.scene.add(h),this.objects.push(h);const l=new G({color:9991770,emissive:1122884}),d=new u(i,l);d.position.x=9,d.name="Mercury",d.scale.set(.5,.5,.5),h.add(d),this.objects.push(d);const M=new x;M.name="Venus Orbit",this.scene.add(M),this.objects.push(M);const L=new G({color:9991770,emissive:1122884}),v=new u(i,L);v.position.x=13,v.name="Venus",v.scale.set(.9,.9,.9),M.add(v),this.objects.push(v);const f=new x;f.name="Earth Orbit",this.scene.add(f),this.objects.push(f);const dt=new G({map:this.textures.earthDiffuse}),V=new u(i,dt);V.name="Earth";const E=new kt;E.position.x=18,E.add(V),f.add(E),this.objects.push(V);const K=new x;K.name="Moon Orbit",this.objects.push(K),E.add(K);const gt=new G({color:8947848,emissive:2236962}),I=new u(i,gt);I.name="Moon",I.position.x=2,I.scale.set(.4,.4,.4),K.add(I),this.objects.push(I);const T=new x;T.name="Mars Orbit",this.scene.add(T),this.objects.push(T);const ut=new G({color:16732218,emissive:6496023}),Y=new u(i,ut);Y.name="Mars";const O=new kt;O.position.x=22,O.scale.set(.6,.6,.6),O.add(Y),T.add(O),this.objects.push(Y)}toggleAxes(t){t?_(this.objects):N(this.objects)}toggleGridControls(t){t?(this.gui=new c({title:"Scenegraph Grid Controls",container:document.getElementById("container-controls")}),this.objects.forEach(e=>{const s=e.name==="Solar System"?25:10;W(this.gui,e,e.name,s)})):this.gui&&(this.objects.forEach(e=>{q(this.gui,e)}),this.gui.destroy())}animate(t){this.objects.forEach(e=>{e.name==="Mercury Orbit"?e.rotation.y=t*1.2:e.name==="Venus Orbit"?e.rotation.y=t*1.1:e.name==="Mars Orbit"?e.rotation.y=t*.9:e.rotation.y=t})}}const Ze=()=>window.location.href.split("/").pop(),$e=o=>{history.replaceState(null,null,o)},b=o=>Array.isArray(o)?o:Object.values(o);class Je extends U{constructor(t,e){super(t);this.infoElem=document.querySelector("#info"),this.canvas=e,this.textures={},this.loadManager=new $,this.loadTextures(),this.loadManager.onProgress=(s,i,n)=>{const a=i/n*100;this.infoElem.textContent="Loading textures... % "+a},this.loadManager.onLoad=()=>{this.infoElem.textContent="",this.lights=[],this.objects={},this.layoutObjects={},this.materials={},this.positions={},this.cameras={},this.setScene(),this.drawObjects(),this.canAnimate=!0,this.toggleAxes(this.flags.showAxes),this.toggleGridControls(this.flags.showGridControls)}}loadTextures(){const t=new rt(this.loadManager),e=t.load("resources/textures/skybox2.jpg");e.mapping=Pt,e.encoding=Ut,this.textures.skyDiffuse=e,this.textures.groundDiffuse=t.load("resources/textures/dry_ground_01_diff_1k.jpg"),this.textures.groundDisplacement=t.load("resources/textures/dry_ground_01_disp_1k.png"),this.textures.groundNormal=t.load("resources/textures/dry_ground_01_nor_gl_1k.jpg"),this.textures.groundRoughness=t.load("resources/textures/dry_ground_01_rough_1k.jpg")}setScene(){this.scene.background=this.textures.skyDiffuse,this.activeCamera.position.set(8,4,10).multiplyScalar(3),this.activeCamera.lookAt(0,0,0);{const t=new P(16777215,1);t.position.set(0,20,0),this.scene.add(t),this.lights.push(t),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048;const e=50;t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.top=e,t.shadow.camera.bottom=-e,t.shadow.camera.near=1,t.shadow.camera.far=50,t.shadow.bias=.001}{const t=new P(16777215,1);t.position.set(1,2,4),this.scene.add(t),this.lights.push(t)}this.controls=new D(this.activeCamera,this.canvas),this.controls.target.set(0,0,0),this.controls.update()}drawObjects(){const t=new at(50,50,1024,1024),e=new B({map:this.textures.groundDiffuse,normalMap:this.textures.groundNormal,displacementMap:this.textures.groundDisplacement,displacementScale:.5,roughnessMap:this.textures.groundRoughness}),s=new u(t,e);s.rotation.x=Math.PI*-.5,s.receiveShadow=!0,s.name="Ground",this.scene.add(s),this.objects.groundMesh=s;const i=4,n=1,a=8,r=new x;r.name="Tank",this.scene.add(r);const h=new H(i,n,a),l=new B({color:6719658,metalness:.8,roughness:.1,envMap:this.textures.skyDiffuse}),d=new u(h,l);d.position.y=1.4,d.castShadow=!0,r.add(d),this.objects.tank=r;const L=lt(75);L.position.y=3,L.position.z=-6,L.rotation.y=Math.PI,d.add(L),this.cameras.tankCamera=L;const v=1,f=.5,dt=12,V=new bt(v,v,f,dt),E=new G({color:8947848});[[-i/2-f/2,-n/2,a/3],[i/2+f/2,-n/2,a/3],[-i/2-f/2,-n/2,0],[i/2+f/2,-n/2,0],[-i/2-f/2,-n/2,-a/3],[i/2+f/2,-n/2,-a/3]].map((Jt,St)=>{const j=new u(V,E);return j.position.set(...Jt),j.rotation.z=Math.PI*.5,j.castShadow=!0,d.add(j),j.name="Wheel No. "+(St+1),this.objects["wheel"+St]=j,j});const gt=2,I=12,T=12,ut=0,Y=Math.PI*2,O=0,Nt=Math.PI*.5,Wt=new z(gt,I,T,ut,Y,O,Nt),X=new u(Wt,l);X.castShadow=!0,d.add(X),this.objects.domeMesh=X,X.name="Turret Dome",X.position.y=.5;const qt=.03,Vt=.07,Ct=a*.75*.2,Kt=new bt(qt,Vt,Ct,32),F=new u(Kt,l);F.rotation.x=Math.PI/2;const Z=new x;F.castShadow=!0,Z.scale.set(5,5,5),Z.position.y=.5,F.position.z=Ct*.5,Z.add(F),this.layoutObjects.turretPivot=Z,this.objects.turretMesh=F,F.name="Turret Pivot",d.add(Z);const Q=lt();Q.position.y=.75*.2,F.add(Q),this.cameras.turretCamera=Q;const Yt=new z(.5,6,3),Lt=new G({color:65280,flatShading:!0});this.materials.targetMaterial=Lt;const tt=new u(Yt,Lt),mt=new x,et=new x,st=new x;tt.castShadow=!0,this.scene.add(mt),this.objects.targetMesh=tt,tt.name="Target",this.layoutObjects.targetOrbit=mt,mt.add(et),et.position.z=a*2,et.position.y=8,et.add(st),st.add(tt),this.layoutObjects.targetBob=st;const A=lt(),pt=new x;this.layoutObjects.targetCameraPivot=pt,A.position.y=1,A.position.z=-2,A.rotation.y=Math.PI,st.add(pt),pt.add(A),this.cameras.targetCamera=A;const vt=new Ue([new w(-10,0),new w(-5,5),new w(0,0),new w(5,-5),new w(10,0),new w(5,10),new w(-5,10),new w(-10,-10),new w(-15,-8),new w(-10,0)]);this.layoutObjects.curve=vt;const Xt=vt.getPoints(50),Zt=new ke().setFromPoints(Xt),$t=new Ft({color:16711680}),wt=new Ee(Zt,$t);wt.rotation.x=Math.PI*.5,wt.position.y=.25,this.scene.add(wt),this.positions.targetPosition=new yt,this.positions.tankPosition=new w,this.positions.tankTarget=new w,this.cameras={default:{cam:this.activeCamera,desc:"detached camera"},turretCamera:{cam:Q,desc:"on turret looking at target"},targetCamera:{cam:A,desc:"near target looking at tank"},tankCamera:{cam:L,desc:"above back of tank"}}}toggleAxes(t){t?_(b(this.objects)):N(b(this.objects))}toggleGridControls(t){t?(this.gui=new c({title:"T & T Grid Controls",container:document.getElementById("container-controls")}),b(this.objects).forEach(e=>{W(this.gui,e,e.name)})):this.gui&&(b(this.objects).forEach(e=>{q(this.gui,e)}),this.gui.destroy())}animate(t){const{objects:e,layoutObjects:s,materials:i,cameras:n,positions:a}=this;t=t*.5,s.targetOrbit.rotation.y=t*.27,s.targetBob.position.y=Math.sin(t*2)*4,e.targetMesh.rotation.x=t*7,e.targetMesh.rotation.y=t*13,i.targetMaterial.emissive.setHSL(t*10%1,1,.25),i.targetMaterial.color.setHSL(t*10%1,1,.25);const r=t*.05;s.curve.getPointAt(r%1,a.tankPosition),s.curve.getPointAt((r+.01)%1,a.tankTarget),e.tank.position.set(a.tankPosition.x,0,a.tankPosition.y),e.tank.lookAt(a.tankTarget.x,0,a.tankTarget.y),e.targetMesh.getWorldPosition(a.targetPosition),s.turretPivot.lookAt(a.targetPosition),n.turretCamera.cam.lookAt(a.targetPosition),e.tank.getWorldPosition(a.targetPosition),s.targetCameraPivot.lookAt(a.targetPosition);for(let d=0;d<6;d++)e["wheel"+d].rotation.x=t*3;const h=Object.values(n),l=h[t*.25%h.length|0];this.activeCamera=l.cam,this.infoElem.textContent="Camera: "+l.desc}}class Qe extends U{constructor(t,e){super(t);this.infoElem=document.querySelector("#info"),this.canvas=e,this.textures={},this.groundSize=120,this.loadManager=new $,this.loadTextures(),this.loadManager.onProgress=(s,i,n)=>{const a=i/n*100;this.infoElem.textContent="Loading textures... % "+a},this.loadManager.onLoad=()=>{this.infoElem.textContent="",this.lights={},this.objects={},this.layoutObjects={},this.materials={},this.positions={},this.setScene(),this.drawObjects(),this.canAnimate=!0,this.toggleAxes(this.flags.showAxes),this.toggleGridControls(this.flags.showGridControls),this.lightSettingsGUI(),this.cameraSettingsGUI()}}loadTextures(){const t=new rt(this.loadManager);this.textures.groundDiffuse=t.load("resources/textures/floor-diffuse-512.jpg"),this.textures.groundNormal=t.load("resources/textures/floor-normal-512.jpg"),this.textures.groundRoughness=t.load("resources/textures/floor-rough-512.jpg"),this.textures.groundDisplacement=t.load("resources/textures/floor-height-512.jpg");const e=this.groundSize/10;for(const s of Object.keys(this.textures)){const i=this.textures[s];i.wrapS=ht,i.wrapT=ht,i.magFilter=Et,i.repeat.set(e,e)}this.textures.suzanneDiffuse=t.load("resources/textures/suzanne.jpg")}setScene(){this.scene.background=new ot(0),this.activeCamera.fov=45,this.activeCamera.aspect=2,this.activeCamera.near=.1,this.activeCamera.far=100,this.activeCamera.position.set(0,14,25);{const t=16777215,e=0,s=new Te(t,e);this.scene.add(s),this.lights.amLight=s}{const t=11657727,e=12155424,s=.5,i=new Tt(t,e,s);this.scene.add(i),this.lights.hemLight=i}{const t=16777215,e=.25,s=new P(t,e);s.castShadow=!0;const i=100;s.shadow.camera.left=-i,s.shadow.camera.right=i,s.shadow.camera.top=i,s.shadow.camera.bottom=-i,s.position.set(0,10,-10),s.target.position.set(0,0,6.34),this.scene.add(s),this.scene.add(s.target),this.lights.dirLight=s,this.dirLightHelper=new Oe(s),this.scene.add(this.dirLightHelper),m(s,this.dirLightHelper)}{const t=16711680,e=.75,s=new nt(t,e);s.position.set(-7,10,1.62),this.scene.add(s),this.lights.pLight=s,this.pLightHelper=new Ae(s),this.scene.add(this.pLightHelper),m(s,this.pLightHelper)}{const t=65280,e=1.25,s=new Ot(t,e);s.castShadow=!0,s.position.set(10,10,-6.5),s.target.position.set(-10,0,6.34),s.penumbra=.12,s.angle=it.degToRad(32),this.scene.add(s),this.lights.sLight=s,this.sLightHelper=new He(s),this.scene.add(this.sLightHelper),m(s,this.sLightHelper)}this.scene.fog=new De("lightblue",10,80),this.controls=new D(this.activeCamera,this.canvas),this.controls.target.set(0,0,0),this.controls.update()}drawObjects(){const t=new at(this.groundSize,this.groundSize),e=new B({map:this.textures.groundDiffuse,normalMap:this.textures.groundNormal,roughnessMap:this.textures.groundRoughness,displacementMap:this.textures.groundDisplacement}),s=new u(t,e);s.receiveShadow=!0,s.rotation.x=Math.PI*-.5,this.scene.add(s),s.name="Ground",this.materials.ground=e,this.objects.ground=s;{const i=4,n=new H(i,i,i),a=new B({color:"#8AC",roughness:0,map:this.textures.suzanneDiffuse}),r=new u(n,a);r.castShadow=!0,r.receiveShadow=!0,r.position.set(i+1,i/2,0),this.scene.add(r),r.name="Cube",this.materials.cube=a,this.objects.cube=r}{const i=3,n=32,a=16,r=new z(i,n,a),h=new B({color:"#CA8",metalness:.9,roughness:.7,emissive:"#FF0000",emissiveIntensity:0}),l=new u(r,h);l.castShadow=!0,l.receiveShadow=!0,l.position.set(-i-1,i+2,0),this.scene.add(l),l.name="Sphere",this.materials.sphere=h,this.objects.sphere=l}}toggleAxes(t){t?_(b(this.objects)):N(b(this.objects))}toggleGridControls(t){t?(this.gui=new c({title:"Lights & Cam Grid Controls",container:document.getElementById("container-controls")}),b(this.objects).forEach(e=>{W(this.gui,e,e.name)})):this.gui&&(b(this.objects).forEach(e=>{q(this.gui,e)}),this.gui.destroy())}lightSettingsGUI(){this.liGUI=new c({title:"Light Settings",container:document.getElementById("container-controls")}),this.liDiffuseGUI=new c({title:"Diffuse Light",parent:this.liGUI}).close(),this.liHemGUI=new c({title:"Hemisphere Light",parent:this.liGUI}).close(),this.liDirectGUI=new c({title:"Directional Light",parent:this.liGUI}).close(),this.liPointGUI=new c({title:"Point Light",parent:this.liGUI}).close(),this.liSpotGUI=new c({title:"Spot Light",parent:this.liGUI}).close(),this.liDiffuseGUI.addColor(new y(this.lights.amLight,"color"),"value").name("color"),this.liDiffuseGUI.add(this.lights.amLight,"intensity",0,2,.01),this.liHemGUI.addColor(new y(this.lights.hemLight,"color"),"value").name("skyColor"),this.liHemGUI.addColor(new y(this.lights.hemLight,"groundColor"),"value").name("groundColor"),this.liHemGUI.add(this.lights.hemLight,"intensity",0,2,.01),this.liDirectGUI.addColor(new y(this.lights.dirLight,"color"),"value").name("color"),this.liDirectGUI.add(this.lights.dirLight,"intensity",0,2,.01),C(this.liDirectGUI,this.lights.dirLight.position,"position",()=>m(this.lights.dirLight,this.dirLightHelper)),C(this.liDirectGUI,this.lights.dirLight.target.position,"target",()=>m(this.lights.dirLight,this.dirLightHelper)),this.liPointGUI.addColor(new y(this.lights.pLight,"color"),"value").name("color"),this.liPointGUI.add(this.lights.pLight,"intensity",0,2,.01),this.liPointGUI.add(this.lights.pLight,"distance",0,120).onChange(()=>m(this.lights.pLight,this.pLightHelper)),C(this.liPointGUI,this.lights.pLight.position,"position",()=>m(this.lights.pLight,this.pLightHelper)),this.liSpotGUI.addColor(new y(this.lights.sLight,"color"),"value").name("color"),this.liSpotGUI.add(this.lights.sLight,"intensity",0,2,.01),this.liSpotGUI.add(new Ht(this.lights.sLight,"angle"),"value",0,90).name("angle").onChange(()=>m(this.lights.sLight,this.sLightHelper)),this.liSpotGUI.add(this.lights.sLight,"penumbra",0,1,.01),C(this.liSpotGUI,this.lights.sLight.position,"position",()=>m(this.lights.sLight,this.sLightHelper)),C(this.liSpotGUI,this.lights.sLight.target.position,"target",()=>m(this.lights.sLight,this.sLightHelper))}cameraSettingsGUI(){this.camGUI=new c({title:"Camera Settings",container:document.getElementById("container-controls")});const t=this.activeCamera;this.camGUI.add(t,"fov",1,180).onChange(()=>R(t));const e=new Dt(t,"near","far",.1);this.camGUI.add(e,"min",.1,200,.1).name("near").onChange(()=>R(t)),this.camGUI.add(e,"max",.1,200,.1).name("far").onChange(()=>R(t))}animate(t){const e=Math.floor(t);let s=t-e;e%2==0?s=(1-s)/4:s/=4,this.objects.sphere.material.emissiveIntensity=s}destroy(){this.liGUI.destroy(),this.camGUI.destroy(),super.destroy()}}class ts extends U{constructor(t,e){super(t);this.infoElem=document.querySelector("#info"),this.canvas=e,this.textures={},this.models={},this.groundSize=120,this.texLoadManager=new $,this.loadTextures(),this.modelLoadManager=new $,this.loadModels(),this.texLoadManager.onProgress=(s,i,n)=>{const a=i/n*100;this.infoElem.textContent="Loading textures... % "+a},this.modelLoadManager.onProgress=(s,i,n)=>{const a=i/n*100;this.infoElem.textContent="Loading car model... % "+a},this.texLoadManager.onLoad=()=>{this.modelLoadManager.onLoad=()=>{this.infoElem.textContent="Car model by mikepan CC-BY-SA. Exported as GLTF with Blender.",this.lights={},this.objects={},this.layoutObjects={},this.materials={},this.positions={},this.setScene(),this.drawObjects(),this.canAnimate=!0,this.toggleAxes(this.flags.showAxes),this.toggleGridControls(this.flags.showGridControls),this.lightSettingsGUI(),this.cameraSettingsGUI(),this.carSettingsGUI()}}}loadTextures(){const t=new rt(this.texLoadManager);this.textures.groundDiffuse=t.load("resources/textures/floor-diffuse-512.jpg"),this.textures.groundNormal=t.load("resources/textures/floor-normal-512.jpg"),this.textures.groundRoughness=t.load("resources/textures/floor-rough-512.jpg"),this.textures.groundDisplacement=t.load("resources/textures/floor-height-512.jpg");const e=this.groundSize/2;for(const s of Object.keys(this.textures)){const i=this.textures[s];i.wrapS=ht,i.wrapT=ht,i.magFilter=Et,i.repeat.set(e,e)}}loadModels(){const t=new ze(this.modelLoadManager),e="resources/models/BMW1M/BMW1M.glb";t.load(e,s=>{this.models.car=s.scene})}setScene(){this.scene.background=new ot(0),this.activeCamera.fov=40,this.activeCamera.aspect=2,this.activeCamera.near=.1,this.activeCamera.far=100,this.activeCamera.position.set(-5,2.5,3);{const t=11657727,e=1591481,s=.05,i=new Tt(t,e,s);this.scene.add(i),this.lights.hemLight=i}{const t=16777215,e=.35,s=new P(t,e);s.castShadow=!0;const i=100;s.shadow.camera.left=-i,s.shadow.camera.right=i,s.shadow.camera.top=i,s.shadow.camera.bottom=-i,s.position.set(0,11,-10),s.target.position.set(0,0,6.34),this.scene.add(s),this.scene.add(s.target),this.lights.dirLight=s}{const t=16777215,e=.7,s=new nt(t,e);s.position.set(4.2,6.8,-2.4),this.scene.add(s),this.lights.pLight=s}{const t=16777215,e=1.25,s=new Ot(t,e);s.castShadow=!0,s.position.set(28,40,25),s.target.position.set(8,8,5.5),s.penumbra=.3,s.angle=it.degToRad(6),this.scene.add(s),this.lights.sLight=s}this.controls=new D(this.activeCamera,this.canvas),this.controls.target.set(0,.5,0),this.controls.update()}drawObjects(){const t=new at(this.groundSize,this.groundSize),e=new B({map:this.textures.groundDiffuse,normalMap:this.textures.groundNormal,roughnessMap:this.textures.groundRoughness,displacementMap:this.textures.groundDisplacement}),s=new u(t,e);s.receiveShadow=!0,s.rotation.x=Math.PI*-.5,this.scene.add(s),s.name="Ground",this.materials.ground=e,this.objects.ground=s,this.models.car.traverse(i=>{i.isMesh&&(i.castShadow=!0)}),this.models.car.position.y=.15,this.models.car.name="Car",this.objects.car=this.models.car,this.scene.add(this.models.car)}toggleAxes(t){t?_(b(this.objects)):N(b(this.objects))}toggleGridControls(t){t?(this.gui=new c({title:"Lights & Cam Grid Controls",container:document.getElementById("container-controls")}),b(this.objects).forEach(e=>{W(this.gui,e,e.name)})):this.gui&&(b(this.objects).forEach(e=>{q(this.gui,e)}),this.gui.destroy())}lightSettingsGUI(){this.liGUI=new c({title:"Light Settings",container:document.getElementById("container-controls")}),this.liHemGUI=new c({title:"Hemisphere Light",parent:this.liGUI}).close(),this.liDirectGUI=new c({title:"Directional Light",parent:this.liGUI}).close(),this.liPointGUI=new c({title:"Point Light",parent:this.liGUI}).close(),this.liSpotGUI=new c({title:"Spot Light",parent:this.liGUI}).close(),this.liHemGUI.addColor(new y(this.lights.hemLight,"color"),"value").name("skyColor"),this.liHemGUI.addColor(new y(this.lights.hemLight,"groundColor"),"value").name("groundColor"),this.liHemGUI.add(this.lights.hemLight,"intensity",0,2,.01),this.liDirectGUI.addColor(new y(this.lights.dirLight,"color"),"value").name("color"),this.liDirectGUI.add(this.lights.dirLight,"intensity",0,2,.01),C(this.liDirectGUI,this.lights.dirLight.position,"position",()=>m(this.lights.dirLight,this.dirLightHelper)),this.liPointGUI.addColor(new y(this.lights.pLight,"color"),"value").name("color"),this.liPointGUI.add(this.lights.pLight,"intensity",0,2,.01),this.liPointGUI.add(this.lights.pLight,"distance",0,120).onChange(()=>m(this.lights.pLight,this.pLightHelper)),C(this.liPointGUI,this.lights.pLight.position,"position",()=>m(this.lights.pLight,this.pLightHelper)),C(this.liDirectGUI,this.lights.dirLight.target.position,"target",()=>m(this.lights.dirLight,this.dirLightHelper)),this.liSpotGUI.addColor(new y(this.lights.sLight,"color"),"value").name("color"),this.liSpotGUI.add(this.lights.sLight,"intensity",0,2,.01),this.liSpotGUI.add(new Ht(this.lights.sLight,"angle"),"value",0,90).name("angle").onChange(()=>m(this.lights.sLight,this.sLightHelper)),this.liSpotGUI.add(this.lights.sLight,"penumbra",0,1,.01),C(this.liSpotGUI,this.lights.sLight.position,"position",()=>m(this.lights.sLight,this.sLightHelper)),C(this.liSpotGUI,this.lights.sLight.target.position,"target",()=>m(this.lights.sLight,this.sLightHelper))}cameraSettingsGUI(){this.camGUI=new c({title:"Camera Settings",container:document.getElementById("container-controls")});const t=this.activeCamera;this.camGUI.add(t,"fov",1,180).onChange(()=>R(t));const e=new Dt(t,"near","far",.1);this.camGUI.add(e,"min",.1,200,.1).name("near").onChange(()=>R(t)),this.camGUI.add(e,"max",.1,200,.1).name("far").onChange(()=>R(t))}carSettingsGUI(){this.carGUI=new c({title:"Car Settings",container:document.getElementById("container-controls")});const t=this.objects.car.getObjectByName("carShell");this.carGUI.addColor(new y(t.material,"color"),"value").name("Color"),this.carGUI.add(t.material,"metalness",0,1).name("Metalness"),this.carGUI.add(t.material,"clearcoat",0,1).name("Clearcoat"),this.carGUI.add(t.material,"clearcoatRoughness",0,1).name("CC Roughness")}destroy(){this.liGUI.destroy(),this.camGUI.destroy(),this.carGUI.destroy(),super.destroy()}}let p={showAxes:!1,showGridControls:!1};const zt=document.querySelectorAll(".nav-buttons button"),k=document.querySelector("#canvas-threejs"),S=new Be({canvas:k});S.shadowMap.enabled=!0;S.shadowMap.type=Re;S.antialias=!0;S.setPixelRatio(window.devicePixelRatio);let g=null;const Bt=o=>{zt.forEach(t=>{t.classList.remove("active")}),o.classList.add("active")},Gt=o=>{switch(document.querySelector("#info").textContent="",o){case"gltfloading":g=new ts(p,k);break;case"lightsncam":g=new Qe(p,k);break;case"tankntarget":g=new Je(p,k);break;case"scenegraph":g=new Xe(p,k);break;case"cubes":g=new Ke(p,k);break;case"primitives":g=new Ye(p,k);break;case"empty":g=new qe(p);break}$e(o),Bt(document.getElementById(o))},Rt=Ze();Gt(Rt||"gltfloading");const _t=o=>{const t=o*.001;g&&(We(S)&&At(S,g.activeCamera),g.canAnimate&&g.animate(t),S.render(g.scene,g.activeCamera)),requestAnimationFrame(_t)};requestAnimationFrame(_t);zt.forEach(o=>{o.addEventListener("click",t=>{const{id:e}=t.target,s=document.getElementById(e);Bt(s),g&&(At(S,g.activeCamera),g.destroy()),Gt(e)})});document.getElementById("show-axes").addEventListener("click",()=>{p=xt(ft({},p),{showAxes:!p.showAxes}),g.updateFlags(p)});document.getElementById("show-grid-controls").addEventListener("click",()=>{p=xt(ft({},p),{showGridControls:!p.showGridControls}),g.updateFlags(p)});screen.width<1024&&alert("This demo is not designed to be viewed from a mobile device. Please use a widescreen monitor for best results.");
